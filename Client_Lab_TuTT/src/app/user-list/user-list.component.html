<div class="container mt-4">
    <div class="row mt-3">
        <h4>DANH SÁCH NGƯỜI DÙNG</h4>
    </div>
    <div class="row mb-3">
        <div class="col-md-2 mt-3">
            <app-select-dropdown [options]="genderOptions" [selectedValue]="searchModel.gender"
                (selectionChange)="onSelectionGenderChange($event)">
            </app-select-dropdown>
        </div>
        <div class="col-md-2 mt-3">
            <div class="input-group">
                <!-- <app-date-input name="date" placeholder="Từ ngày" ngModel></app-date-input> -->
                <!-- <input type="text" class="form-control" placeholder="Select date" mask="00/00/0000"> -->
                <!-- <input placeholder="Từ ngày" class="form-control" type="text" [value]="searchModel.fromDate | date:'dd-MM-yyyy'"
                    onfocus="(this.type='date')" onblur="(this.type='text')" id="fromDate" /> -->
                <!--               
                <input type="date" name="myBirthday" [(ngModel)]="searchModel.fromDate" (change)="formatDate($event)"> -->
                <input placeholder="Từ ngày" class="form-control" type="text" onfocus="(this.type='date')"
                    onblur="(this.type='text')" id="fromDate" [(ngModel)]="searchModel.fromDate"
                    [ngModelOptions]="{standalone: true}" />
            </div>
        </div>
        <div class="col-md-2 mt-3">
            <div class="input-group">
                <input placeholder="Đến ngày" class="form-control" type="text" onfocus="(this.type='date')"
                    onblur="(this.type='text')" id="toDate" [(ngModel)]="searchModel.toDate"
                    [ngModelOptions]="{standalone: true}" />
            </div>

        </div>
        <div class="col-md-6 mt-3">
            <div class="input-group">
                <input type="text" autocomplete="off" class="form-control" placeholder="Tìm kiếm theo..."
                    aria-label="Tìm kiếm theo..." (keyup.enter)="onSearch()" [(ngModel)]="searchModel.key"
                    [ngModelOptions]="{standalone: true}" aria-describedby="basic-addon1">
                <div class="input-group-text">
                    <img src="/assets/images/icons/search-svg.svg">
                </div>
                <button type="button" class="btn btn-primary" (click)="onSearch()">Tìm kiếm</button>
            </div>
        </div>
    </div>
    <div class="row mt-3 mb-3">
        <div class="col-auto">
            <button type="button" class="btn btn-primary" (click)="openEditModal(null)"> <i
                    class="fa-solid fa-plus"></i> Thêm mới</button>
        </div>
        <div class="col-auto" *ngIf="selectedItems.length">
            <button type="button" class="btn btn-primary" (click)="onDeleteMultiUser()"> <i
                    class="fa-solid fa-plus"></i> Xóa Người dùng đã chọn</button>
            <app-confirm-dialog *ngIf="showMultiDeleteDialog" [message]="confirmMessageMultiDelete"
                            (confirm)="handleMultiDeleteConfirm($event)">
                        </app-confirm-dialog>
        </div>
    </div>
    <div class="row table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th class="text-center">STT</th>
                    <th class="text-center">Chọn</th>
                    <th class="text-start">Họ tên</th>
                    <th class="text-center">Tên đăng nhập</th>
                    <th class="text-center">Ngày sinh </th>
                    <th class="text-center">Giới tính </th>
                    <th class="text-center">Điện thoại </th>
                    <th class="text-start">Email</th>
                    <th class="text-center">Sửa</th>
                    <th class="text-center">Xóa</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of dataSource; let i = index">
                    <th class="fw-normal text-center">{{ i + 1 }}</th>
                    <th class="fw-normal text-center">
                        <input class="form-check-input" type="checkbox" (change)="toggleSelection(user.id)">
                    </th>
                    <th class="fw-normal text-start">{{ user.fullName }}</th>
                    <th class="fw-normal text-center">{{ user.username }}</th>
                    <th class="fw-normal text-center">{{ user.birthDate | date:'dd/MM/yyyy' }}</th>
                    <th class="fw-normal text-center">{{ user.gender }}</th>
                    <th class="fw-normal text-center">{{ user.phoneNumber }} </th>
                    <th class="fw-normal text-start">{{ user.email }}</th>
                    <td class="fw-normal text-center">
                        <button class="btn btn-primary btn-sm me-1" (click)="openEditModal(user)"><i
                                class="fas fa-edit"></i></button>
                        <app-user-edit *ngIf="showEditDialog" [user]="selectedUser" (save)="handleSave($event)"
                            [title]="titleEditDialog" (cancel)="handleCancel()">
                        </app-user-edit>
                    </td>
                    <td class="fw-normal text-center">
                        <button class="btn btn-danger btn-sm" (click)="deleteUser(user)"><i
                                class="fas fa-trash"></i></button>
                        <app-confirm-dialog *ngIf="showDeleteDialog" [message]="confirmMessageDelete"
                            (confirm)="handleDeleteConfirm($event)">
                        </app-confirm-dialog>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row mt-3">
        <div class="mt-3 col-lg-1 col-md-1 hidden-sm hidden-xs">
            <app-select-dropdown [options]="listItemNumberPerPage" [selectedValue]="limit"
                (selectionChange)="onSelectionNumberPerPageChange($event)">
            </app-select-dropdown>
        </div>
        <div class="mt-3 col-lg-11 col-md-11 col-sm-11 col-xs-11">
            <app-pagination [currentPage]="page" [totalItems]="total" (pageChange)="onPageChange($event)">
            </app-pagination>
        </div>
    </div>
</div>

<app-toast></app-toast>