<div class="container mt-4">
    <div class="row mt-3">
        <h4>DANH SÁCH NGƯỜI DÙNG</h4>
    </div>
    <div class="row mb-3">
        <div class="col-md-2 mt-3">
            <app-select-dropdown [options]="genderOptions" [selectedValue]="searchModel.gender"
                (selectionChange)="onSelectionGenderChange($event)">
            </app-select-dropdown>
        </div>
        <div class="col-md-2 mt-3">
            <div class="input-group">
               
                <!-- <input placeholder="Từ ngày" class="form-control" type="text" onfocus="(this.type='date')"
                    onblur="(this.type='text')" id="fromDate" [(ngModel)]="searchModel.fromDate"
                    [ngModelOptions]="{standalone: true}" /> -->
                    <datepicker [(ngModel)]="searchModel.fromDate" [displayFormatter]="displayFromDateFormatter" [showIcon]="true"></datepicker>
            </div>
        </div>
        <div class="col-md-2 mt-3">
            <div class="input-group">
                <input placeholder="Đến ngày" class="form-control" type="text" onfocus="(this.type='date')"
                    onblur="(this.type='text')" id="toDate" [(ngModel)]="searchModel.toDate"
                    [ngModelOptions]="{standalone: true}" />
                    <!-- <datepicker [(ngModel)]="searchModel.toDate" [displayFormatter]="displayToDateFormatter"  [showIcon]="true"></datepicker> -->
            </div>

        </div>
        <div class="col-md-6 mt-3">
            <div class="input-group">
                <input type="text" autocomplete="off" class="form-control" placeholder="Tìm kiếm theo..."
                    aria-label="Tìm kiếm theo..." aria-describedby="basic-addon1" [(ngModel)]="searchModel.key"
                    [ngModelOptions]="{standalone: true}" (keyup.enter)="onSearch()">
                <div class="input-group-text">
                    <img src="/assets/images/icons/search-svg.svg">
                </div>
                <button type="button" class="btn btn-primary" (click)="onSearch()">Tìm kiếm</button>
            </div>
        </div>
    </div>
    <div class="row mt-3 mb-3">
        <div class="col-auto">
            <button type="button" class="btn btn-primary" (click)="openEditModal(null)"> <i
                    class="fa-solid fa-plus"></i> Thêm mới</button>
        </div>
        <div class="col-auto" *ngIf="selectedItems.length">
            <button type="button" class="btn btn-primary" (click)="onDeleteMultiUser()"> <i
                    class="fa-solid fa-plus"></i> Xóa Người dùng đã chọn</button>
            <app-confirm-dialog *ngIf="showMultiDeleteDialog" [message]="confirmMessageMultiDelete"
                (confirm)="handleMultiDeleteConfirm($event)">
            </app-confirm-dialog>
        </div>
    </div>
    <div class="row table-responsive">
        <table class="table table-striped">
            <thead>
                <tr>
                    <th class="text-center">STT</th>
                    <th class="text-center">Chọn</th>
                    <th class="text-start">Họ tên</th>
                    <th class="text-center">Tên đăng nhập</th>
                    <th class="text-center">Ngày sinh </th>
                    <th class="text-center">Giới tính </th>
                    <th class="text-center">Điện thoại </th>
                    <th class="text-start">Email</th>
                    <th class="text-center">Sửa</th>
                    <th class="text-center">Xóa</th>
                </tr>
            </thead>
            <tbody>
                <tr *ngFor="let user of dataSource; let i = index">
                    <th class="fw-normal text-center">{{ i + 1 }}</th>
                    <th class="fw-normal text-center">
                        <input class="form-check-input" type="checkbox" (change)="toggleSelection(user.id)">
                    </th>
                    <th class="fw-normal text-start">{{ user.fullName }}</th>
                    <th class="fw-normal text-center">{{ user.username }}</th>
                    <th class="fw-normal text-center">{{ user.birthDate | date:'dd/MM/yyyy' }}</th>
                    <th class="fw-normal text-center">{{ user.gender }}</th>
                    <th class="fw-normal text-center">{{ user.phoneNumber }} </th>
                    <th class="fw-normal text-start">{{ user.email }}</th>
                    <td class="fw-normal text-center">
                        <button class="btn btn-primary btn-sm me-1" (click)="openEditModal(user)"><i
                                class="fas fa-edit"></i></button>
                        <app-user-edit *ngIf="showEditDialog" [user]="selectedUser" (save)="handleSave($event)"
                            [title]="titleEditDialog" (cancel)="handleCancel()">
                        </app-user-edit>
                    </td>
                    <td class="fw-normal text-center">
                        <button class="btn btn-danger btn-sm" (click)="deleteUser(user)"><i
                                class="fas fa-trash"></i></button>
                        <app-confirm-dialog *ngIf="showDeleteDialog" [message]="confirmMessageDelete"
                            (confirm)="handleDeleteConfirm($event)">
                        </app-confirm-dialog>
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
    <div class="row mb-3">
        <div class="col-lg-7 col-md-7 hidden-sm hidden-xs">
            <div class="row row-cols-lg-auto g-3 align-items-center">
                <div class="col-sm-2">
                    Hiển thị
                </div>
                <div class="col-sm-2">
                    <app-select-dropdown [options]="listItemNumberPerPage" [selectedValue]="limit"
                        (selectionChange)="onSelectionNumberPerPageChange($event)">
                    </app-select-dropdown>
                </div>
                <div class="col-sm-2">
                    / trang
                </div>
                <div class="col-auto">
                    <span class="__total-record"> - Có {{total}} mục trong danh sách</span>
                </div>

            </div>

        </div>
        <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5">
            <app-pagination [currentPage]="page" [pageSize]="limit" [totalItems]="total" (pageChange)="onPageChange($event)">
            </app-pagination>
        </div>
    </div>
</div>

<app-toast></app-toast>